# åˆå¶ğŸ‚ MetingAPI ç‚¹æ­Œæ’ä»¶

åŸºäº MetingAPI çš„ç‚¹æ­Œæ’ä»¶ï¼Œæ”¯æŒQQéŸ³ä¹ã€ç½‘æ˜“äº‘ã€é…·ç‹—ã€é…·æˆ‘ç­‰éŸ³æºã€‚

**å½“å‰ç‰ˆæœ¬ï¼šv1.0.8**

## éŸ³ä¹å¡ç‰‡è¯´æ˜ï¼ˆæ¨èä½¿ç”¨ï¼Œå› ä¸ºè½¬è¯­éŸ³éŸ³è´¨æ‰“æŠ˜æ‰£ï¼‰

- éŸ³ä¹å¡ç‰‡åŠŸèƒ½é»˜è®¤å…³é—­ï¼ˆé»˜è®¤ä¸º `false`ï¼‰
- å¼€å¯åï¼Œç”¨æˆ·è¾“å…¥â€œæœæ­Œ xxxï¼ˆæ­Œåï¼‰â€ï¼Œå†æ¬¡è¾“å…¥â€œç‚¹æ­Œ xï¼ˆæœç´¢åˆ—è¡¨æ­Œæ›²ä½ç½®ï¼Œæ•°å­—æ’åˆ—ï¼‰â€ï¼Œä¼šæ”¶åˆ°åŒ…å«éŸ³ä¹ä¿¡æ¯çš„å¡ç‰‡ï¼Œç‚¹å‡»å¡ç‰‡çš„æ­Œæ›²å°é¢ä¸Šçš„æ’­æ”¾æŒ‰é’®å¯ä»¥ç›´æ¥æ’­æ”¾éŸ³ä¹

## åŠŸèƒ½ç‰¹æ€§

- æ”¯æŒå¤šéŸ³æºï¼šQQéŸ³ä¹ã€ç½‘æ˜“äº‘ã€é…·ç‹—ã€é…·æˆ‘
- ä¼šè¯çº§éŸ³æºåˆ‡æ¢ï¼Œä¸å½±å“å…¶ä»–ä¼šè¯
- æ™ºèƒ½è¯­éŸ³åˆ†æ®µå‘é€ï¼Œè‡ªåŠ¨å¤„ç†è¶…è¿‡2åˆ†é’Ÿçš„æ­Œæ›²
- æ”¯æŒéŸ³ä¹å¡ç‰‡æ˜¾ç¤ºï¼ˆå¯é€‰ï¼‰
- å¿«æ·ç‚¹æ­ŒæŒ‡ä»¤ï¼Œç›´æ¥æŒ‡å®šéŸ³æºæœç´¢
- ç®€å•æ˜“ç”¨çš„å‘½ä»¤äº¤äº’
- æ”¯æŒä¸‰ç§ API ç±»å‹ï¼Œæœ€å¤§é™åº¦å…¼å®¹å„ç§ MetingAPI

## å®‰è£…

1. ï¼ˆ1ï¼‰å°†æ’ä»¶ç›®å½• `astrbot_plugin_meting` æ”¾å…¥ AstrBot çš„ `data/plugins` ç›®å½•
ï¼ˆ2ï¼‰WebUIä¸­ä»é“¾æ¥å®‰è£…:https://github.com/chuyegzs/astrbot_plugin_meting
2. åœ¨ AstrBot WebUI çš„æ’ä»¶ç®¡ç†å¤„å¯ç”¨è¯¥æ’ä»¶
3. åœ¨æ’ä»¶é…ç½®ä¸­è®¾ç½® MetingAPI åœ°å€å’Œç±»å‹

## é…ç½®

åœ¨ AstrBot WebUI çš„æ’ä»¶é…ç½®é¡µé¢ä¸­ï¼Œè®¾ç½®ä»¥ä¸‹å‚æ•°ï¼š

### MetingAPI é…ç½®

**API åœ°å€**
- **æè¿°**ï¼šé€‰æ‹©é¢„è®¾çš„ MetingAPI æˆ–è‡ªå®šä¹‰
- **å¯é€‰å€¼**ï¼š
  - `https://musicapi.chuyel.top/meting/` - åˆå¶ğŸ‚ç«¹å¶ Furry APIï¼ˆå¸¦QQéŸ³ä¹/ç½‘æ˜“äº‘ä¼šå‘˜ï¼‰
  - `https://metingapi.nanorocky.top/` - NanoRocky APIï¼ˆå¸¦ç½‘æ˜“äº‘ä¼šå‘˜ï¼‰
  - `custom` - è‡ªå®šä¹‰ API
- **é»˜è®¤**ï¼š`https://musicapi.chuyel.top/meting/`

**API ç±»å‹**ï¼ˆä»…åœ¨ API åœ°å€ä¸º custom æ—¶ç”Ÿæ•ˆï¼‰
- **æè¿°**ï¼šé€‰æ‹© MetingAPI çš„ç±»å‹
- **å¯é€‰å€¼**ï¼š
  - `1` - Node APIï¼ˆé»˜è®¤ï¼‰ï¼šæ ‡å‡† MetingAPI
  - `2` - PHP APIï¼šä½¿ç”¨ `keyword` å‚æ•°ä¼ é€’æœç´¢è¯
  - `3` - è‡ªå®šä¹‰å‚æ•°ï¼šä½¿ç”¨å ä½ç¬¦æ„å»ºè¯·æ±‚
- **é»˜è®¤**ï¼š`1`

**è‡ªå®šä¹‰ API åœ°å€**ï¼ˆä»…åœ¨ API åœ°å€ä¸º custom æ—¶ç”Ÿæ•ˆï¼‰
- **æè¿°**ï¼šè‡ªå®šä¹‰ MetingAPI åœ°å€
- **ç¤ºä¾‹**ï¼š`https://api.example.com/meting`

**è‡ªå®šä¹‰ API æ¨¡æ¿**ï¼ˆä»…åœ¨ API ç±»å‹ä¸º 3 æ—¶ç”Ÿæ•ˆï¼‰
- **æè¿°**ï¼šè‡ªå®šä¹‰è¯·æ±‚æ¨¡æ¿ï¼Œå¿…é¡»åŒ…å« `:server`ã€`:type`ã€`:id`ã€`:r` å ä½ç¬¦
- **ç¤ºä¾‹**ï¼š`server=:server&type=:type&id=:id&r=:r`

### å…¶ä»–é…ç½®

**é»˜è®¤éŸ³æº**
- **æè¿°**ï¼šé»˜è®¤ä½¿ç”¨çš„éŸ³ä¹å¹³å°
- **å¯é€‰å€¼**ï¼š`tencent`ï¼ˆQQéŸ³ä¹ï¼‰ã€`netease`ï¼ˆç½‘æ˜“äº‘ï¼‰ã€`kugou`ï¼ˆé…·ç‹—ï¼‰ã€`kuwo`ï¼ˆé…·æˆ‘ï¼‰
- **é»˜è®¤**ï¼š`netease`

**ä½¿ç”¨éŸ³ä¹å¡ç‰‡**
- **æè¿°**ï¼šæ˜¯å¦ä½¿ç”¨éŸ³ä¹å¡ç‰‡æ˜¾ç¤ºæœç´¢ç»“æœ
- **é»˜è®¤**ï¼š`false`

**éŸ³ä¹å¡ç‰‡ç­¾ååœ°å€**
- **æè¿°**ï¼šç”¨äºè·å–éŸ³ä¹å¡ç‰‡ç­¾åçš„ API åœ°å€
- **é»˜è®¤**ï¼š`https://oiapi.net/api/QQMusicJSONArk/`

**æœç´¢ç»“æœæ˜¾ç¤ºæ•°é‡**
- **æè¿°**ï¼šæœç´¢ç»“æœæ˜¾ç¤ºçš„æ­Œæ›²æ•°é‡
- **èŒƒå›´**ï¼š5-30
- **é»˜è®¤**ï¼š10

## ä½¿ç”¨æ–¹æ³•

### æŸ¥çœ‹å¸®åŠ©

å‘é€ä»¥ä¸‹ä»»ä¸€æŒ‡ä»¤æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤ï¼š
```
ç‚¹æ­ŒæŒ‡ä»¤
```

### åˆ‡æ¢éŸ³æº

åœ¨å½“å‰ä¼šè¯ä¸­åˆ‡æ¢éŸ³ä¹å¹³å°ï¼Œä¸å½±å“å…¶ä»–ä¼šè¯ï¼š

- `åˆ‡æ¢QQéŸ³ä¹`  - åˆ‡æ¢åˆ°QQéŸ³ä¹
- `åˆ‡æ¢ç½‘æ˜“äº‘`  - åˆ‡æ¢åˆ°ç½‘æ˜“äº‘
- `åˆ‡æ¢é…·ç‹—`  - åˆ‡æ¢åˆ°é…·ç‹—
- `åˆ‡æ¢é…·æˆ‘`  - åˆ‡æ¢åˆ°é…·æˆ‘

### æœç´¢æ­Œæ›²

ä½¿ç”¨å½“å‰ä¼šè¯çš„éŸ³æºæœç´¢æ­Œæ›²ï¼š

```
æœæ­Œ ä¸€æœŸä¸€ä¼š
```

æœç´¢åä¼šæ˜¾ç¤ºæ­Œæ›²åˆ—è¡¨ï¼ŒåŒ…å«æ­Œæ›²åå’Œæ­Œæ‰‹ä¿¡æ¯ã€‚

### æ’­æ”¾æ­Œæ›²

#### æ–¹å¼ä¸€ï¼šé€šè¿‡åºå·æ’­æ”¾
åœ¨æœç´¢ç»“æœåï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ’­æ”¾æŒ‡å®šåºå·çš„æ­Œæ›²ï¼š

```
ç‚¹æ­Œ 1
```

å…¶ä¸­ `1` æ˜¯æ­Œæ›²åºå·ï¼ˆå¦‚ï¼šç‚¹æ­Œ 1ã€ç‚¹æ­Œ 2ã€ç‚¹æ­Œ 3...ï¼‰ã€‚

**æ³¨æ„**ï¼š`ç‚¹æ­Œ` å’Œæ•°å­—ä¹‹é—´å¿…é¡»æœ‰ç©ºæ ¼ã€‚

#### æ–¹å¼äºŒï¼šç›´æ¥ç‚¹æ­Œï¼ˆå¿«æ·æŒ‡ä»¤ï¼‰
ç›´æ¥æŒ‡å®šéŸ³æºæœç´¢å¹¶æ’­æ”¾ç¬¬ä¸€é¦–æ­Œæ›²ï¼š

```
ç½‘æ˜“ç‚¹æ­Œ ä¸€æœŸä¸€ä¼š
è…¾è®¯ç‚¹æ­Œ æ™´å¤©
QQç‚¹æ­Œ ç¨»é¦™
é…·ç‹—ç‚¹æ­Œ æ¼”å‘˜
é…·æˆ‘ç‚¹æ­Œ å‘Šç™½æ°”çƒ
```

è¿™äº›å¿«æ·æŒ‡ä»¤ä¼šå¿½ç•¥å½“å‰ä¼šè¯çš„éŸ³æºè®¾ç½®ï¼Œç›´æ¥åœ¨æŒ‡å®šå¹³å°æœç´¢ã€‚

### éŸ³ä¹å¡ç‰‡

å¦‚æœå¯ç”¨äº†éŸ³ä¹å¡ç‰‡åŠŸèƒ½ï¼ˆ`use_music_card: true`ï¼‰ï¼Œæœç´¢ç»“æœå°†ä»¥ç²¾ç¾çš„å¡ç‰‡å½¢å¼å±•ç¤ºï¼ŒåŒ…å«ï¼š
- æ­Œæ›²å°é¢
- æ­Œæ›²åç§°å’Œæ­Œæ‰‹
- ç‚¹å‡»è·³è½¬é“¾æ¥

## ä¾èµ–

æ’ä»¶éœ€è¦ä»¥ä¸‹ä¾èµ–åº“ï¼ˆä¼šåœ¨å®‰è£…æ’ä»¶æ—¶è‡ªåŠ¨å®‰è£…ï¼‰ï¼š

- `aiohttp>=3.8.0` - å¼‚æ­¥ HTTP è¯·æ±‚
- `pydub>=0.25.1` - éŸ³é¢‘å¤„ç†
- `packaging` - ç‰ˆæœ¬è§£æ

**æ³¨æ„**ï¼š`pydub` éœ€è¦ç³»ç»Ÿå®‰è£… FFmpegã€‚è¯·ç¡®ä¿ç³»ç»Ÿå·²å®‰è£… FFmpeg å¹¶åœ¨ PATH ä¸­ã€‚

### FFmpeg å®‰è£…

**Windows:**
```bash
# ä½¿ç”¨ winget
winget install ffmpeg

# æˆ–æ‰‹åŠ¨ä¸‹è½½ï¼šhttps://ffmpeg.org/download.html
```

**Linux (Ubuntu/Debian):**
```bash
sudo apt-get update
sudo apt-get install ffmpeg
```

**macOS:**
```bash
brew install ffmpeg
```

## æŠ€æœ¯è¯´æ˜

### éŸ³æºæ˜ å°„

| ç”¨æˆ·è¾“å…¥ | API å‚æ•° |
|---------|---------|
| QQéŸ³ä¹ | tencent |
| ç½‘æ˜“äº‘ | netease |
| é…·ç‹— | kugou |
| é…·æˆ‘ | kuwo |
| å“”å“©å“”å“© | bilibili |

### API ç±»å‹è¯´æ˜

**1. Node APIï¼ˆé»˜è®¤ï¼‰**
- æ ‡å‡† MetingAPI æ ¼å¼
- è¯·æ±‚åœ°å€ï¼š`{api_url}/api?server={server}&type={type}&id={id}`

**2. PHP API**
- PHP ç‰ˆæœ¬ MetingAPI
- è¯·æ±‚åœ°å€ï¼š`{api_url}?server={server}&type=search&id=0&keyword={keyword}&dwrc=false`

**3. è‡ªå®šä¹‰å‚æ•°**
- å®Œå…¨è‡ªå®šä¹‰è¯·æ±‚æ ¼å¼
- æ”¯æŒå ä½ç¬¦ï¼š`:server`ã€`:type`ã€`:id`ã€`:r`

### è¯­éŸ³åˆ†æ®µæœºåˆ¶

QQ è¯­éŸ³æ—¶é•¿ä¸Šé™ä¸º2åˆ†é’Ÿï¼Œæ’ä»¶ä¼šè‡ªåŠ¨å°†é•¿æ­Œæ›²åˆ†å‰²ä¸ºå¤šä¸ªç‰‡æ®µï¼š
- æ¯æ®µæ—¶é•¿ï¼šå¯é…ç½®ï¼ˆé»˜è®¤120ç§’ï¼‰
- æ ¼å¼ï¼šWAV
- å‘é€æ–¹å¼ï¼šé€æ®µå‘é€

### æ•°æ®å­˜å‚¨

- ä¼šè¯éŸ³æºè®¾ç½®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œé‡å¯åæ¢å¤ä¸ºé»˜è®¤éŸ³æº
- æœç´¢ç»“æœä¸´æ—¶å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œä»…ç”¨äºå½“å‰ä¼šè¯
- ä¸‹è½½çš„éŸ³é¢‘æ–‡ä»¶å­˜å‚¨åœ¨ç³»ç»Ÿä¸´æ—¶ç›®å½•ï¼Œæ’­æ”¾å®Œæˆåè‡ªåŠ¨åˆ é™¤

## å¸¸è§é—®é¢˜

### Q: æç¤º"è¯·å…ˆåœ¨æ’ä»¶é…ç½®ä¸­è®¾ç½® MetingAPI åœ°å€"
A: è¯·åœ¨ AstrBot WebUI çš„æ’ä»¶é…ç½®é¡µé¢ä¸­é€‰æ‹©æˆ–å¡«å†™æ­£ç¡®çš„ MetingAPI åœ°å€ã€‚

### Q: éŸ³ä¹å¡ç‰‡æ— æ³•æ˜¾ç¤º
A: è¯·æ£€æŸ¥ï¼š
1. `use_music_card` æ˜¯å¦è®¾ç½®ä¸º `true`
2. `api_sign_url` æ˜¯å¦é…ç½®æ­£ç¡®
3. ç­¾åæœåŠ¡æ˜¯å¦å¯ç”¨

### Q: æœç´¢æ­Œæ›²æ—¶æç¤º"ç½‘ç»œé”™è¯¯"
A: è¯·æ£€æŸ¥ï¼š
1. MetingAPI åœ°å€æ˜¯å¦æ­£ç¡®
2. API ç±»å‹æ˜¯å¦åŒ¹é…
3. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

### Q: æ’­æ”¾æ­Œæ›²æ—¶æç¤º"ç¼ºå°‘ pydub ä¾èµ–"
A: è¯·ç¡®ä¿å·²å®‰è£… FFmpegï¼Œå¹¶é‡æ–°å®‰è£…æ’ä»¶ä¾èµ–ã€‚

## å¼€å‘

### é¡¹ç›®ç»“æ„

```
astrbot_plugin_meting/
â”œâ”€â”€ main.py              # æ’ä»¶ä¸»ä»£ç 
â”œâ”€â”€ metadata.yaml        # æ’ä»¶å…ƒæ•°æ®
â”œâ”€â”€ _conf_schema.json    # é…ç½®æ–‡ä»¶ Schema
â”œâ”€â”€ requirements.txt     # Python ä¾èµ–
â”œâ”€â”€ README.md           # è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ LICENSE             # è®¸å¯è¯
â””â”€â”€ .gitignore         # Git å¿½ç•¥æ–‡ä»¶
```

### è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License

## è‡´è°¢

- [åˆå¶ğŸ‚MetingAPI](https://github.com/chuyegzs/Meting-UI-API) - åˆå¶ğŸ‚äºŒæ¬¡å¼€å‘çš„MetingAPI
- [MetingAPI](https://github.com/metowolf/Meting) - éŸ³ä¹ API æœåŠ¡
- [AstrBot](https://github.com/AstrBotDevs/AstrBot) - AstrBotæœºå™¨äººæ¡†æ¶
- [NanoRocky](https://github.com/NanoRocky) - åŠŸèƒ½æ·»åŠ ä¸ä»£ç ä¼˜åŒ–ï¼Œéƒ¨åˆ†åŠŸèƒ½çš„è´¡çŒ®è€…

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åŠ å…¥ åˆå¶ğŸ‚Furry æ’ä»¶åé¦ˆQQç¾¤ï¼š535563643ï¼ˆå¿…ç‚¹Starï¼‰
